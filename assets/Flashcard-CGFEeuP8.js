import{i as de,d as ie,u as ce,j as ue,w as B,c as r,a as t,t as d,k as U,v as pe,e as p,b as c,h as A,l as I,m as be,p as F,F as V,r as H,q as xe,s as ve,T as me,f as m,x as w,g as he,o as l,y as ge,z as fe,A as we,_ as ke}from"./index-CFcIdBb9.js";import{g as N,u as q,a as G}from"./known-ByqyvvLD.js";import{u as ye,a as _e}from"./useSpeech-DFP_Lvfr.js";const Ie=de("vocab",{state:()=>({currentTopicId:null,currentIndex:0,customVocabs:null}),getters:{currentTopicData(s){return s.currentTopicId?N(s.currentTopicId):void 0},currentVocabs(s){return s.customVocabs!=null?s.customVocabs:(s.currentTopicId?N(s.currentTopicId):void 0)?.vocabs??[]},currentWord(s){return this.currentVocabs[s.currentIndex]},hasNext(s){return s.currentIndex<this.currentVocabs.length-1},hasPrev(s){return s.currentIndex>0},progress(s){const b=this.currentVocabs.length;return{current:Math.min(s.currentIndex+1,b)||0,total:b}}},actions:{setTopic(s){this.currentTopicId=s,this.customVocabs=null,this.currentIndex=0},setFilterOnlyNew(s){if(!this.currentTopicId)return;const k=N(this.currentTopicId)?.vocabs??[];if(s){const n=q(),y=G();this.customVocabs=k.filter(_=>!n.hasItem(this.currentTopicId,_.word)&&!y.hasKnown(this.currentTopicId,_.word))}else this.customVocabs=null;this.currentIndex=0},nextWord(){this.hasNext&&this.currentIndex++},prevWord(){this.hasPrev&&this.currentIndex--},goToIndex(s){const b=this.currentVocabs.length;this.currentIndex=Math.max(0,Math.min(s,b-1))},reset(){this.currentTopicId=null,this.currentIndex=0}}}),Te={class:"min-h-screen p-4 sm:p-6 transition-colors duration-200 bg-gradient-to-br from-slate-50 via-teal-50/30 to-cyan-50/50 dark:from-slate-900 dark:via-slate-900 dark:to-teal-950/50"},Se={class:"flex flex-wrap items-center gap-3 mb-6"},Ce={class:"flex-1 m-0 font-heading text-xl sm:text-2xl text-slate-800 dark:text-slate-100 min-w-0 truncate"},Ve={class:"flex items-center gap-2 shrink-0 flex-wrap justify-end"},Ne={class:"inline-flex items-center gap-2 cursor-pointer select-none text-sm text-slate-600 dark:text-slate-400"},$e={key:0,class:"text-slate-500 dark:text-slate-500"},Pe={class:"text-lg"},We={class:"m-0 text-teal-600 dark:text-teal-400 font-semibold"},Ae={key:0,class:"max-w-[28rem] mx-auto text-center py-12"},Fe={key:1,class:"max-w-[28rem] mx-auto"},Le={class:"card-perspective mb-10"},Me={class:"card-inner"},je={class:"card-face card-front"},Ke={class:"w-full h-44 sm:h-48 bg-slate-100 dark:bg-slate-700/50 overflow-hidden rounded-t-[1.25rem]"},Oe=["src","alt"],De={class:"p-5 pt-4 flex-1 flex flex-col bg-white dark:bg-slate-800"},Ee={class:"font-heading m-0 mb-1 text-2xl sm:text-3xl font-semibold text-teal-600 dark:text-teal-400"},Re={key:0,class:"m-0 mb-1 flex items-center gap-2 flex-wrap"},ze={class:"text-sm text-slate-500 dark:text-slate-400 font-mono"},Be={key:1,class:"mb-3 p-3 rounded-xl bg-slate-100 dark:bg-slate-700/60 text-left text-xs"},Ue={key:2,class:"m-0 mb-3 text-sm text-slate-400 dark:text-slate-500"},He={class:"flex flex-wrap items-center gap-2"},qe=["disabled"],Ge=["disabled"],Je={class:"card-face card-back"},Qe={class:"m-0 text-xl font-semibold text-white"},Xe={key:0,class:"m-0 text-sm text-white/90 font-mono"},Ye={class:"flex flex-wrap items-center gap-2"},Ze=["disabled"],et=["disabled"],tt={key:1,class:"mt-auto text-left pt-2 border-t border-white/25"},at={class:"m-0 pl-4 space-y-1 text-sm leading-relaxed text-white/95"},st={key:0,class:"bg-amber-300/90 text-slate-900 font-semibold rounded px-0.5"},ot={key:0,class:"bg-white dark:bg-slate-800/95 rounded-2xl p-5 shadow-xl dark:shadow-none dark:ring-1 dark:ring-slate-700 mb-6"},rt={class:"mb-4"},lt={class:"flex flex-wrap items-center gap-2"},nt=["disabled"],dt=["disabled"],it=ie({__name:"Flashcard",setup(s){const b=we(),k=he(),n=Ie(),y=q(),_=G(),L=ce(),M=m(()=>b.params.typeId??""),j=m(()=>b.params.topicId??""),u=m(()=>M.value&&j.value?`${M.value}/${j.value}`:""),h=m(()=>N(u.value)),a=m(()=>n.currentWord),J=m(()=>n.currentVocabs),K=m(()=>n.progress),x=w(!1),g=w(""),v=w("idle"),Q=w(!0),T=w(!1),f=w(!1),O=m(()=>!u.value||!h.value?.vocabs?0:h.value.vocabs.filter(i=>!y.hasItem(u.value,i.word)&&!_.hasKnown(u.value,i.word)).length),X=m(()=>f.value&&(h.value?.vocabs?.length??0)>0&&O.value===0),Y=m(()=>a.value?.word??""),Z=ye(Y),{pronounce:D,pronounceSlow:E,isSpeaking:S}=_e();function ee(){if(!u.value||!h.value){k.replace({name:"topics"});return}n.setTopic(u.value)}ue(ee);function R(){n.setFilterOnlyNew(f.value),x.value=!1,g.value="",v.value="idle"}B(u,()=>{h.value&&n.setTopic(u.value),f.value=!1,x.value=!1,g.value="",v.value="idle"}),B(()=>n.currentIndex,()=>{x.value=!1,g.value="",v.value="idle"});function te(i){return Array.isArray(i)?i.join(", "):i}function ae(i,e){if(!e?.trim())return[{text:i,highlight:!1}];const o=e.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),P=new RegExp(`(${o})`,"gi");return i.split(P).map((W,ne)=>({text:W,highlight:ne%2===1}))}function se(){x.value=!x.value}function oe(){a.value&&(_.add(u.value,a.value.word),y.remove(u.value,a.value.word)),$()}function z(){if(!a.value)return;const i=a.value.word.trim().toLowerCase(),o=g.value.trim().toLowerCase()===i;v.value=o?"correct":"wrong",o&&y.add(u.value,a.value.word)}function $(){n.hasNext?n.nextWord():k.push({name:"topics"})}function re(){n.hasPrev&&n.prevWord()}function le(){k.push({name:"topics"})}return(i,e)=>(l(),r("div",Te,[t("header",Se,[t("button",{type:"button",class:"px-4 py-2.5 rounded-xl font-semibold border-2 border-teal-200 dark:border-teal-700 bg-white dark:bg-slate-800 text-teal-700 dark:text-teal-300 shadow-sm hover:shadow-md transition-all duration-200 hover:-translate-y-0.5 active:translate-y-0",onClick:le}," â† Topics "),t("h1",Ce,d(h.value?.topic),1),t("div",Ve,[t("label",Ne,[U(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>f.value=o),type:"checkbox",class:"rounded border-slate-300 dark:border-slate-600 text-teal-600 focus:ring-teal-500",onChange:e[1]||(e[1]=o=>R())},null,544),[[pe,f.value]]),e[11]||(e[11]=t("span",null,"Only new words",-1)),J.value.length?(l(),r("span",$e,"("+d(O.value)+" new)",1)):p("",!0)]),t("button",{type:"button",class:"p-2 rounded-lg bg-white/80 dark:bg-slate-800/80 border border-slate-200 dark:border-slate-700 hover:shadow-md transition-all","aria-label":"Toggle dark mode",onClick:e[2]||(e[2]=o=>c(L).toggle())},[t("span",Pe,d(c(L).darkMode?"â˜€ï¸":"ğŸŒ™"),1)]),t("p",We,d(K.value.current)+" / "+d(K.value.total),1)])]),X.value?(l(),r("main",Ae,[e[12]||(e[12]=t("p",{class:"text-slate-600 dark:text-slate-400 mb-4"},"All words in this topic are already in your known or learning list.",-1)),t("button",{type:"button",class:"px-4 py-2.5 rounded-xl font-semibold border-2 border-teal-200 dark:border-teal-700 bg-white dark:bg-slate-800 text-teal-700 dark:text-teal-300",onClick:e[3]||(e[3]=o=>{f.value=!1,R()})}," Show all words ")])):a.value?(l(),r("main",Fe,[t("div",Le,[t("div",{class:A(["card-outer cursor-pointer select-none",{"is-flipped":x.value}]),onClick:se},[t("div",Me,[t("div",je,[t("div",Ke,[t("img",{src:c(Z),alt:a.value.word,class:"w-full h-full object-cover",loading:"lazy"},null,8,Oe)]),t("div",De,[t("h2",Ee,d(a.value.word),1),a.value.phonetic?(l(),r("p",Re,[t("span",ze,d(a.value.phonetic),1),t("button",{type:"button",class:"text-xs text-teal-600 dark:text-teal-400 hover:underline focus:outline-none","aria-label":"Show IPA guide",onClick:e[4]||(e[4]=I(o=>T.value=!T.value,["stop"]))},d(T.value?"Hide":"IPA?"),1)])):p("",!0),T.value?(l(),r("div",Be,[...e[13]||(e[13]=[be('<p class="font-semibold mb-1.5 m-0 text-slate-700 dark:text-slate-200" data-v-2c75203d>IPA guide (US English)</p><p class="m-0 mb-1 text-slate-600 dark:text-slate-300" data-v-2c75203d><strong data-v-2c75203d>Stress:</strong> Ëˆ primary Â· ËŒ secondary</p><p class="m-0 mb-1 text-slate-600 dark:text-slate-300" data-v-2c75203d><strong data-v-2c75203d>Vowels:</strong> iË see Â· Éª sit Â· e bed Â· Ã¦ cat Â· ÊŒ cup Â· É‘Ë father Â· É”Ë saw Â· ÊŠ book Â· uË blue Â· É™ about Â· Éš mother</p><p class="m-0 mb-1 text-slate-600 dark:text-slate-300" data-v-2c75203d><strong data-v-2c75203d>Diphthongs:</strong> eÉª day Â· aÉª eye Â· É”Éª boy Â· oÊŠ go Â· aÊŠ now</p><p class="m-0 text-slate-600 dark:text-slate-300" data-v-2c75203d><strong data-v-2c75203d>Consonants:</strong> Î¸ thin Â· Ã° this Â· Êƒ ship Â· Ê’ vision Â· tÊƒ cheese Â· dÊ’ jump Â· Å‹ sing</p>',5)])])):p("",!0),a.value.partOfSpeech?(l(),r("p",Ue,d(te(a.value.partOfSpeech)),1)):p("",!0),t("div",He,[t("button",{type:"button",class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium bg-teal-100 dark:bg-teal-900/50 text-teal-700 dark:text-teal-300 border-0 cursor-pointer hover:bg-teal-200 dark:hover:bg-teal-800 transition-colors hover:scale-[1.02] active:scale-[0.98] disabled:opacity-60","aria-label":"Listen pronunciation",disabled:c(S),onClick:e[5]||(e[5]=I(o=>c(D)(a.value.word),["stop"]))},[...e[14]||(e[14]=[t("span",{class:"text-lg","aria-hidden":"true"},"ğŸ”Š",-1),F(" Pronounce ",-1)])],8,qe),t("button",{type:"button",class:"inline-flex items-center gap-2 px-3 py-2 rounded-xl text-xs font-medium bg-slate-100 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300 border-0 cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors disabled:opacity-60","aria-label":"Listen slowly for learning",disabled:c(S),title:"Hear the word slowly (twice) to match the IPA",onClick:e[6]||(e[6]=I(o=>c(E)(a.value.word),["stop"]))}," ğŸ¢ Slow ",8,Ge)]),e[15]||(e[15]=t("p",{class:"mt-3 text-xs text-slate-400 dark:text-slate-500"},"Tap card to reveal meaning Â· tap again to flip back",-1))])]),t("div",Je,[t("p",Qe,d(a.value.meaning),1),a.value.phonetic?(l(),r("p",Xe,d(a.value.phonetic),1)):p("",!0),t("div",Ye,[t("button",{type:"button",class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium bg-white/25 hover:bg-white/35 text-white border-0 cursor-pointer transition-colors disabled:opacity-60","aria-label":"Listen",disabled:c(S),onClick:e[7]||(e[7]=I(o=>c(D)(a.value.word),["stop"]))},[...e[16]||(e[16]=[t("span",{class:"text-lg"},"ğŸ”Š",-1),F(" Pronounce ",-1)])],8,Ze),t("button",{type:"button",class:"inline-flex items-center gap-1.5 px-3 py-2 rounded-xl text-xs font-medium bg-white/20 hover:bg-white/30 text-white border-0 cursor-pointer transition-colors disabled:opacity-60","aria-label":"Listen slowly",disabled:c(S),title:"Slow (twice) to match IPA",onClick:e[8]||(e[8]=I(o=>c(E)(a.value.word),["stop"]))}," ğŸ¢ Slow ",8,et)]),Q.value&&a.value.exampleSentences?.length?(l(),r("div",tt,[e[17]||(e[17]=t("p",{class:"font-semibold mb-1.5 text-sm m-0 text-white"},"Examples",-1)),t("ul",at,[(l(!0),r(V,null,H(a.value.exampleSentences,(o,P)=>(l(),r("li",{key:P},[(l(!0),r(V,null,H(ae(o,a.value.word),(C,W)=>(l(),r(V,{key:W},[C.highlight?(l(),r("span",st,d(C.text),1)):(l(),r(V,{key:1},[F(d(C.text),1)],64))],64))),128))]))),128))])])):p("",!0)])])],2)]),xe(me,{name:"fade-slide"},{default:ve(()=>[x.value?(l(),r("div",ot,[t("div",rt,[e[18]||(e[18]=t("label",{for:"type-word",class:"block mb-2 font-semibold text-slate-800 dark:text-slate-200"},"Type the word",-1)),t("div",lt,[U(t("input",{id:"type-word","onUpdate:modelValue":e[9]||(e[9]=o=>g.value=o),type:"text",class:A(["flex-1 min-w-[120px] px-4 py-3 rounded-xl text-base transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-800",v.value==="idle"?"border-2 border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700/50 focus:border-teal-500 focus:ring-teal-500/30":v.value==="correct"?"border-2 border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-200":"border-2 border-red-400 bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200"]),placeholder:"Type here...",disabled:v.value!=="idle",onKeydown:e[10]||(e[10]=fe(o=>v.value==="idle"?z():$(),["enter"]))},null,42,nt),[[ge,g.value]]),v.value==="idle"?(l(),r("button",{key:0,type:"button",class:"px-5 py-3 rounded-xl font-semibold border-0 bg-gradient-to-r from-teal-500 to-cyan-500 text-white cursor-pointer shadow-md hover:shadow-lg transition-all duration-200 hover:-translate-y-0.5 active:translate-y-0",onClick:z}," Check ")):p("",!0)])]),t("button",{type:"button",class:"w-full py-3 px-4 rounded-xl font-semibold text-sm border-2 border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700/50 text-slate-700 dark:text-slate-300 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",onClick:oe}," âœ“ I already know this word ")])):p("",!0)]),_:1}),t("div",{class:A(["mt-10 flex justify-between gap-3",{"justify-end":!x.value}])},[x.value?(l(),r("button",{key:0,type:"button",class:"px-5 py-2.5 rounded-xl font-semibold border-2 border-teal-200 dark:border-teal-700 bg-white dark:bg-slate-800 text-teal-700 dark:text-teal-300 cursor-pointer disabled:opacity-40 disabled:cursor-not-allowed hover:bg-teal-50 dark:hover:bg-slate-700 transition-all duration-200",disabled:!c(n).hasPrev,onClick:re}," â† Previous ",8,dt)):p("",!0),x.value&&v.value!=="idle"?(l(),r("button",{key:1,type:"button",class:"px-5 py-2.5 rounded-xl font-semibold border-0 bg-gradient-to-r from-teal-500 to-cyan-500 text-white cursor-pointer shadow-md hover:shadow-lg transition-all duration-200 hover:-translate-y-0.5",onClick:$}," Next â†’ ")):p("",!0)],2)])):p("",!0)]))}}),bt=ke(it,[["__scopeId","data-v-2c75203d"]]);export{bt as default};
