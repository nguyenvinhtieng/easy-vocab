import{w as E,x as S,j as k}from"./index-CFcIdBb9.js";const l=new Map;function v(n){return`https://picsum.photos/seed/${encodeURIComponent(n)}/400/300`}function T(n){const t=n.trim();return t?t.split(/\s+/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):""}async function A(n){const t=T(n);if(!t)return null;try{const e=`https://en.wikipedia.org/w/api.php?action=query&titles=${encodeURIComponent(t)}&prop=pageimages&format=json&pithumbsize=400&origin=*`,o=(await(await fetch(e)).json()).query?.pages??{};return Object.values(o)[0]?.thumbnail?.source??null}catch{return null}}function W(n){const t=S("");async function e(s){if(!s?.trim()){t.value="";return}const c=s.trim().toLowerCase();if(l.has(c)){t.value=l.get(c);return}t.value=v(s);const o=await A(s);o&&(l.set(c,o),t.value=o)}return E(n,s=>e(s??""),{immediate:!0}),t}const V=.9,g=.65,j=400;let r=null;function f(){return typeof speechSynthesis<"u"?speechSynthesis.getVoices():[]}function p(){const n=f().filter(e=>e.lang.startsWith("en-US"));return n.length===0?null:n.find(e=>e.name.includes("Google")||e.name.includes("Zira")||e.name.includes("Samantha")||e.name.includes("Daniel")||e.name.includes("US English"))??n[0]??null}function C(){if(f().length>0){r=p();return}typeof speechSynthesis<"u"&&"onvoiceschanged"in speechSynthesis&&(speechSynthesis.onvoiceschanged=()=>{r=p()})}function _(){const n=S(!1);k(C);function t(){!r&&f().length>0&&(r=p())}function e(a,y={}){if(!a?.trim()||typeof speechSynthesis>"u")return;t();const{slow:h=!1,repeat:w=!1}=y,U=h?g:V;speechSynthesis.cancel();const d=u=>new Promise(m=>{const i=new SpeechSynthesisUtterance(a.trim());i.lang="en-US",i.rate=u,i.pitch=1,i.volume=1,r&&(i.voice=r),i.onend=()=>m(),i.onerror=()=>m(),n.value=!0,speechSynthesis.speak(i)});(async()=>(await d(U),w&&h&&(await new Promise(u=>setTimeout(u,j)),await d(g)),n.value=!1))()}function s(a){e(a,{slow:!1})}function c(a){e(a,{slow:!0,repeat:!0})}function o(){typeof speechSynthesis<"u"&&(speechSynthesis.cancel(),n.value=!1)}return{pronounce:s,pronounceSlow:c,speak:e,stop:o,isSpeaking:n}}export{_ as a,W as u};
