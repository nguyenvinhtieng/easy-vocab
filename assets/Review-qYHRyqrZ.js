import{d as ie,u as ce,j as ue,c as s,a as e,b as p,t as n,e as u,q as z,s as J,T as K,h as N,l as C,m as pe,p as E,F as I,r as W,g as be,f as h,x as m,o as l,k as q,B as xe,y as me,z as ve,_ as ge}from"./index-CFcIdBb9.js";import{u as fe,a as he,g as G,d as ke}from"./known-ByqyvvLD.js";import{a as we,u as ye}from"./useSpeech-DFP_Lvfr.js";const _e={class:"min-h-screen p-4 sm:p-6 transition-colors duration-200 bg-gradient-to-br from-slate-50 via-teal-50/30 to-cyan-50/50 dark:from-slate-900 dark:via-slate-900 dark:to-teal-950/50"},Se={class:"flex flex-wrap items-center gap-3 mb-4"},Ce={class:"flex items-center gap-2"},Ie={class:"text-lg"},Ae={class:"m-0 text-teal-600 dark:text-teal-400 font-semibold"},Te={class:"flex flex-wrap items-center gap-2 mb-4"},je={key:0,class:"px-3 py-1.5 rounded-lg text-sm font-semibold bg-emerald-100 dark:bg-emerald-900/40 text-emerald-800 dark:text-emerald-200"},Le={key:1,class:"px-3 py-1.5 rounded-lg text-sm font-semibold bg-emerald-100 dark:bg-emerald-900/40 text-emerald-800 dark:text-emerald-200"},Ne={key:2,class:"px-3 py-1.5 rounded-lg text-sm font-semibold bg-red-100 dark:bg-red-900/40 text-red-800 dark:text-red-200"},$e={class:"mb-4 max-w-[28rem] mx-auto"},Re={class:"mt-2 m-0 p-0 list-none space-y-1.5 max-h-40 overflow-y-auto bg-white dark:bg-slate-800/90 rounded-xl p-3 shadow-lg dark:ring-1 dark:ring-slate-700"},Ee={class:"font-medium text-slate-800 dark:text-slate-200"},We={class:"text-slate-500 dark:text-slate-400 text-xs"},Pe={key:0,class:"max-w-[28rem] mx-auto"},Ve={class:"card-perspective mb-10"},Oe={class:"card-inner"},Be={class:"card-face card-front"},De={class:"w-full h-44 bg-slate-100 dark:bg-slate-700/50 overflow-hidden rounded-t-[1.25rem]"},Fe=["src","alt"],Ue={class:"p-5 pt-4 flex-1 flex flex-col bg-white dark:bg-slate-800"},Me={class:"font-heading m-0 mb-1 text-2xl text-teal-600 dark:text-teal-400 font-semibold"},ze={key:0,class:"m-0 mb-1 flex items-center gap-2 flex-wrap"},Je={class:"text-sm text-slate-500 dark:text-slate-400 font-mono"},Ke={key:1,class:"mb-3 p-3 rounded-xl bg-slate-100 dark:bg-slate-700/60 text-left text-xs"},qe={key:2,class:"m-0 mb-3 text-sm text-slate-400 dark:text-slate-500"},Ge={class:"flex flex-wrap items-center gap-2"},He=["disabled"],Qe=["disabled"],Xe={class:"card-face card-back"},Ye={class:"text-sm text-white/85 m-0 mb-1"},Ze={class:"m-0 text-xl font-semibold text-white"},et={class:"flex flex-wrap items-center gap-2"},tt=["disabled"],at=["disabled"],ot={key:0,class:"mt-auto text-left pt-2 border-t border-white/25"},st={class:"m-0 pl-4 space-y-1 text-sm leading-relaxed text-white/95"},lt={key:0,class:"bg-amber-300/90 text-slate-900 font-semibold rounded px-0.5"},rt={key:0,class:"bg-white dark:bg-slate-800/95 rounded-2xl p-5 shadow-xl dark:ring-1 dark:ring-slate-700 mb-6"},nt={class:"mb-4"},dt={class:"flex flex-wrap items-center gap-2"},it=["disabled"],ct=["disabled"],ut=ie({__name:"Review",setup(pt){const _=be(),k=fe(),A=he(),P=ce(),v=h(()=>k.all),g=m(0),b=m(!1),w=m(""),x=m("idle"),$=m(!1),R=m(!1),S=m(""),V=m(null),T=m(!1),j=m(!1),{pronounce:O,pronounceSlow:B,isSpeaking:L}=we(),f=h(()=>v.value[g.value]),r=h(()=>{const o=f.value;if(!o)return null;const t=G(o.topicId),a=ke(o.topicId,o.word);return{topicName:t?.topic??o.topicId,word:o.word,vocab:a}}),H=h(()=>g.value<v.value.length-1),D=h(()=>g.value>0),F=h(()=>({current:g.value+1,total:v.value.length})),Q=h(()=>v.value.map(o=>({topicName:G(o.topicId)?.topic??o.topicId,word:o.word}))),X=h(()=>r.value?.word??""),Y=ye(X);function Z(o){return Array.isArray(o)?o.join(", "):o}function ee(o,t){if(!t?.trim())return[{text:o,highlight:!1}];const a=t.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),d=new RegExp(`(${a})`,"gi");return o.split(d).map((c,y)=>({text:c,highlight:y%2===1}))}function te(){b.value=!b.value}function U(){if(!f.value)return;const o=f.value.word.trim().toLowerCase(),t=w.value.trim().toLowerCase();x.value=t===o?"correct":"wrong"}function M(){H.value?(g.value++,b.value=!1,w.value="",x.value="idle"):_.push({name:"topics"})}function ae(){D.value&&(g.value--,b.value=!1,w.value="",x.value="idle")}function oe(){f.value&&(A.add(f.value.topicId,f.value.word),k.remove(f.value.topicId,f.value.word),v.value.length===0?_.push({name:"topics"}):g.value>=v.value.length&&(g.value=Math.max(0,v.value.length-1)),b.value=!1,w.value="",x.value="idle")}function se(){_.push({name:"topics"})}function le(){const o={learn:k.all,known:A.all},t=JSON.stringify(o,null,2),a=new Blob([t],{type:"application/json"}),d=URL.createObjectURL(a),i=document.createElement("a");i.href=d,i.download="easy-vocab-backup.json",i.click(),URL.revokeObjectURL(d),$.value=!0,setTimeout(()=>$.value=!1,2e3)}function re(){S.value="",V.value?.click()}function ne(){confirm("Clear all saved data (words to learn and known words)? This cannot be undone.")&&(k.clear(),A.clear(),_.push({name:"topics"}))}function de(o){const t=o.target,a=t.files?.[0];if(!a)return;const d=new FileReader;d.onload=()=>{try{const i=d.result,c=JSON.parse(i);if(c&&typeof c=="object"&&!Array.isArray(c)&&("learn"in c||"known"in c)){const y=c;Array.isArray(y.learn)&&k.replaceAll(y.learn),Array.isArray(y.known)&&A.replaceAll(y.known)}else if(Array.isArray(c))k.replaceAll(c);else{S.value="Invalid format";return}R.value=!0,setTimeout(()=>R.value=!1,2e3)}catch(i){S.value=i.message}},d.readAsText(a),t.value=""}return ue(()=>{v.value.length===0&&_.replace({name:"topics"})}),(o,t)=>(l(),s("div",_e,[e("header",Se,[e("button",{type:"button",class:"px-4 py-2.5 rounded-xl font-semibold border-2 border-teal-200 dark:border-teal-700 bg-white dark:bg-slate-800 text-teal-700 dark:text-teal-300 shadow-sm hover:shadow-md transition-all duration-200",onClick:se}," â† Topics "),t[9]||(t[9]=e("h1",{class:"flex-1 m-0 font-heading text-xl sm:text-2xl text-slate-800 dark:text-slate-100"},"Words to learn",-1)),e("div",Ce,[e("button",{type:"button",class:"p-2.5 rounded-xl bg-white/80 dark:bg-slate-800/80 shadow-sm hover:shadow-md transition-all border border-slate-200/80 dark:border-slate-700","aria-label":"Toggle dark mode",onClick:t[0]||(t[0]=a=>p(P).toggle())},[e("span",Ie,n(p(P).darkMode?"â˜€ï¸":"ğŸŒ™"),1)]),e("p",Ae,n(F.value.current)+" / "+n(F.value.total),1)])]),e("div",Te,[e("button",{type:"button",class:"px-4 py-2.5 rounded-xl font-semibold border-2 border-teal-200 dark:border-teal-700 bg-white dark:bg-slate-800 text-teal-700 dark:text-teal-300 text-sm shadow-sm hover:shadow-md transition-all",onClick:le}," ğŸ“¤ Export "),e("button",{type:"button",class:"px-4 py-2.5 rounded-xl font-semibold border-2 border-teal-200 dark:border-teal-700 bg-white dark:bg-slate-800 text-teal-700 dark:text-teal-300 text-sm shadow-sm hover:shadow-md transition-all",onClick:re}," ğŸ“¥ Import "),e("button",{type:"button",class:"text-xs text-slate-500 dark:text-slate-400 hover:text-red-600 dark:hover:text-red-400 transition-colors underline",onClick:ne}," Clear data "),e("input",{ref_key:"fileInput",ref:V,type:"file",accept:".json,application/json",class:"hidden",onChange:de},null,544),$.value?(l(),s("span",je,"Exported!")):u("",!0),R.value?(l(),s("span",Le,"Imported.")):u("",!0),S.value?(l(),s("span",Ne,n(S.value),1)):u("",!0)]),e("section",$e,[e("button",{type:"button",class:"w-full text-left py-3 px-4 rounded-xl text-sm font-medium text-teal-800 dark:text-teal-200 bg-teal-50 dark:bg-teal-900/30 hover:bg-teal-100 dark:hover:bg-teal-900/50 transition-colors border border-teal-200/50 dark:border-teal-700/50",onClick:t[1]||(t[1]=a=>T.value=!T.value)},n(T.value?"â–¼":"â–¶")+" Words in your list ("+n(v.value.length)+") ",1),z(K,{name:"fade-slide"},{default:J(()=>[q(e("ul",Re,[(l(!0),s(I,null,W(Q.value,(a,d)=>(l(),s("li",{key:`${a.topicName}-${a.word}-${d}`,class:N(["flex justify-between items-center py-2.5 px-3 rounded-lg text-sm transition-colors",d===g.value?"bg-teal-100 dark:bg-teal-900/40":"bg-slate-50 dark:bg-slate-700/30"])},[e("span",Ee,n(a.word),1),e("span",We,n(a.topicName),1)],2))),128))],512),[[xe,T.value]])]),_:1})]),f.value&&r.value?(l(),s("main",Pe,[e("div",Ve,[e("div",{class:N(["card-outer cursor-pointer select-none",{"is-flipped":b.value}]),onClick:te},[e("div",Oe,[e("div",Be,[e("div",De,[e("img",{src:p(Y),alt:r.value.word,class:"w-full h-full object-cover",loading:"lazy"},null,8,Fe)]),e("div",Ue,[e("h2",Me,n(r.value.word),1),r.value.vocab?.phonetic?(l(),s("p",ze,[e("span",Je,n(r.value.vocab.phonetic),1),e("button",{type:"button",class:"text-xs text-teal-600 dark:text-teal-400 hover:underline focus:outline-none","aria-label":"Show IPA guide",onClick:t[2]||(t[2]=C(a=>j.value=!j.value,["stop"]))},n(j.value?"Hide":"IPA?"),1)])):u("",!0),j.value?(l(),s("div",Ke,[...t[10]||(t[10]=[pe('<p class="font-semibold mb-1.5 m-0 text-slate-700 dark:text-slate-200" data-v-c17dbd0a>IPA guide (US English)</p><p class="m-0 mb-1 text-slate-600 dark:text-slate-300" data-v-c17dbd0a><strong data-v-c17dbd0a>Stress:</strong> Ëˆ primary Â· ËŒ secondary</p><p class="m-0 mb-1 text-slate-600 dark:text-slate-300" data-v-c17dbd0a><strong data-v-c17dbd0a>Vowels:</strong> iË see Â· Éª sit Â· e bed Â· Ã¦ cat Â· ÊŒ cup Â· É‘Ë father Â· É”Ë saw Â· ÊŠ book Â· uË blue Â· É™ about Â· Éš mother</p><p class="m-0 mb-1 text-slate-600 dark:text-slate-300" data-v-c17dbd0a><strong data-v-c17dbd0a>Diphthongs:</strong> eÉª day Â· aÉª eye Â· É”Éª boy Â· oÊŠ go Â· aÊŠ now</p><p class="m-0 text-slate-600 dark:text-slate-300" data-v-c17dbd0a><strong data-v-c17dbd0a>Consonants:</strong> Î¸ thin Â· Ã° this Â· Êƒ ship Â· Ê’ vision Â· tÊƒ cheese Â· dÊ’ jump Â· Å‹ sing</p>',5)])])):u("",!0),r.value.vocab?.partOfSpeech?(l(),s("p",qe,n(Z(r.value.vocab.partOfSpeech)),1)):u("",!0),e("div",Ge,[e("button",{type:"button",class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium bg-teal-100 dark:bg-teal-900/50 text-teal-700 dark:text-teal-300 border-0 cursor-pointer hover:bg-teal-200 dark:hover:bg-teal-800 transition-colors disabled:opacity-60","aria-label":"Listen",disabled:p(L),onClick:t[3]||(t[3]=C(a=>p(O)(r.value.word),["stop"]))},[...t[11]||(t[11]=[e("span",{class:"text-lg"},"ğŸ”Š",-1),E(" Pronounce ",-1)])],8,He),e("button",{type:"button",class:"inline-flex items-center gap-1.5 px-3 py-2 rounded-xl text-xs font-medium bg-slate-100 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300 border-0 cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors disabled:opacity-60","aria-label":"Listen slowly",disabled:p(L),title:"Slow (twice) to match IPA",onClick:t[4]||(t[4]=C(a=>p(B)(r.value.word),["stop"]))}," ğŸ¢ Slow ",8,Qe)]),t[12]||(t[12]=e("p",{class:"mt-3 text-xs text-slate-400 dark:text-slate-500"},"Tap card to reveal meaning",-1))])]),e("div",Xe,[e("p",Ye,n(r.value.topicName),1),e("p",Ze,n(r.value.vocab?.meaning??r.value.word),1),e("div",et,[e("button",{type:"button",class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium bg-white/25 hover:bg-white/35 text-white border-0 cursor-pointer transition-colors disabled:opacity-60","aria-label":"Listen",disabled:p(L),onClick:t[5]||(t[5]=C(a=>p(O)(r.value.word),["stop"]))},[...t[13]||(t[13]=[e("span",{class:"text-lg"},"ğŸ”Š",-1),E(" Pronounce ",-1)])],8,tt),e("button",{type:"button",class:"inline-flex items-center gap-1.5 px-3 py-2 rounded-xl text-xs font-medium bg-white/20 hover:bg-white/30 text-white border-0 cursor-pointer disabled:opacity-60","aria-label":"Listen slowly",disabled:p(L),onClick:t[6]||(t[6]=C(a=>p(B)(r.value.word),["stop"]))}," ğŸ¢ Slow ",8,at)]),r.value.vocab?.exampleSentences?.length?(l(),s("div",ot,[t[14]||(t[14]=e("p",{class:"font-semibold mb-1.5 text-sm m-0 text-white"},"Examples",-1)),e("ul",st,[(l(!0),s(I,null,W(r.value.vocab.exampleSentences,(a,d)=>(l(),s("li",{key:d},[(l(!0),s(I,null,W(ee(a,r.value.word),(i,c)=>(l(),s(I,{key:c},[i.highlight?(l(),s("span",lt,n(i.text),1)):(l(),s(I,{key:1},[E(n(i.text),1)],64))],64))),128))]))),128))])])):u("",!0)])])],2)]),z(K,{name:"fade-slide"},{default:J(()=>[b.value?(l(),s("div",rt,[e("div",nt,[t[15]||(t[15]=e("label",{for:"review-type-word",class:"block mb-2 font-semibold text-slate-800 dark:text-slate-200"},"Type the word",-1)),e("div",dt,[q(e("input",{id:"review-type-word","onUpdate:modelValue":t[7]||(t[7]=a=>w.value=a),type:"text",class:N(["flex-1 min-w-[120px] px-4 py-3 rounded-xl text-base transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-800",x.value==="idle"?"border-2 border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700/50 focus:border-teal-500 focus:ring-teal-500/30":x.value==="correct"?"border-2 border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-200":"border-2 border-red-400 bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200"]),placeholder:"Type here...",disabled:x.value!=="idle",onKeydown:t[8]||(t[8]=ve(a=>x.value==="idle"?U():M(),["enter"]))},null,42,it),[[me,w.value]]),x.value==="idle"?(l(),s("button",{key:0,type:"button",class:"px-5 py-3 rounded-xl font-semibold border-0 bg-gradient-to-r from-teal-500 to-cyan-500 text-white cursor-pointer shadow-md hover:shadow-lg transition-all",onClick:U}," Check ")):u("",!0)])]),e("button",{type:"button",class:"w-full py-3 rounded-xl font-semibold border-2 border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 cursor-pointer hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",onClick:oe}," ğŸ—‘ Remove from list ")])):u("",!0)]),_:1}),e("div",{class:N(["mt-10 flex justify-between gap-3",{"justify-end":!b.value}])},[b.value?(l(),s("button",{key:0,type:"button",class:"px-5 py-2.5 rounded-xl font-semibold border-2 border-teal-200 dark:border-teal-700 bg-white dark:bg-slate-800 text-teal-700 dark:text-teal-300 cursor-pointer disabled:opacity-40 disabled:cursor-not-allowed hover:bg-teal-50 dark:hover:bg-slate-700 transition-all",disabled:!D.value,onClick:ae}," â† Previous ",8,ct)):u("",!0),b.value&&x.value!=="idle"?(l(),s("button",{key:1,type:"button",class:"px-5 py-2.5 rounded-xl font-semibold border-0 bg-gradient-to-r from-teal-500 to-cyan-500 text-white cursor-pointer shadow-md hover:shadow-lg transition-all hover:-translate-y-0.5",onClick:M}," Next â†’ ")):u("",!0)],2)])):u("",!0)]))}}),vt=ge(ut,[["__scopeId","data-v-c17dbd0a"]]);export{vt as default};
